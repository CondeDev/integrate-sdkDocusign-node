# Digital Hiring Docusign

### Summary

- **[Settings](#settings)**

- **[Running locally](#running-locally)**

- **[Running the tests](#running-the-tests)**

- **[Build the project for production](#build-the-project-for-production)**

- **[Run the project in production](#run-the-project-in-production)**

- **[Obtaining the Docusign integration key](#obtaining-the-docusign-integration-key)**

- **[Getting the private key](#getting-the-private-key)**

- **[Obtaining token generation consent](#obtaining-token-generation-consent)**

- **[Requesting integration review](#requesting-integration-review)**

- **[How to contribute](#how-to-contribute)**

- **[Author](#author)**


### Settings

To configure the environment variables, just create at the root of the project, a file called **.env** and pass the following settings.

```
TOKEN = ''
INTEGRATION_KEY = ''
SCOPE = ''
BASE_URL = ''
AUTH_SERVER = ''
USER_ID = ''
ACCOUNT_ID = ''
USERNAME = ''
PASSWORD = ''
```

- **TOKEN**: is a token generated by the docusign itself, it is possible to be generating the following link: <a href="https://developers.docusign.com/oauth-token-generator">TOKEN DOCUSIGN</a>. This token is only valid for approximately 8 hours and is for development purposes only.

- **INTEGRATION_KEY**: is your application's integration key, generated in the docusign administrative panel. *([Click here to see the session on the integration key](#obtendo-a-chave-de-integração-docusign))*

- **SCOPE**: the scope of representation is implied due to the use of the JWT concession.

- **BASE_URL**: is the base url of docusign, the homol url will be `https://demo.docusign.net/restapi`, already for production `https://na2.docusign.net/restapi`.

- **AUTH_SERVER**: the authorization server to be used is defined. For the developer sandbox environment, use `account-d.docusign.com`. For production, use `account.docusign.com`.

- **USER_ID**: is the user ID (also called the API username) in whose name your application will make calls to the DocuSign API. This ID can be obtained through the administrative panel of docusign.

- **ACCOUNT_ID**: is the **sandbox** or final production account id. To locate, simply [click here](https://support.docusign.com/articles/Where-do-I-find-my-DocuSign-account-number) and follow the guidelines.

- **USERNAME**: is the account email.

- **PASSWORD**: is the account password.

### Running locally

- It is necessary to configure the system to declare the project variables, as explained [in this session](#configurando).

- `yarn install`

- `yarn dev`

Following these steps, your project will be running at http://localhost:3333

### Running the tests

The integration tests were done using Jest and bringing a report with coverage. All methods that are external libs (at the moment only docusign), it is being mocked, to test 100% of our code, because external libraries end up leaving our responsibility. To run the test, just follow the steps below:

- `yarn install`

- `yarn test`

### Build the project for production

- `yarn build`

A folder called **dist** will be created, inside that folder will be the entire project in pure javascript.

### Run the project in production

- Configure the application as explained [in this session](#configurando).

- Just place the files that are in the `dist` folder on the server. *(To generate the `dist` folder, just check [this session](#buildando-o-projeto-para-produção))*

- `yarn install --production` ou `npm install --production`

- `yarn start` ou `npm start`

**Remembering that you need to be defining your variables in the file `.env`**

### Obtaining the Docusign integration key


To obtain the integration key, simply access the sandbox account, enter the administrative area and select the option **API and keys**. On the screen, a **ADD APPLICATION / INTEGRATION CODE** button will be displayed, by clicking on it, just be defining the name of the application and it will generate an integration code.

*Example*: **a7879568-xxxx-xxxx-xxxx-482731558eac**.

### Getting the private key

To obtain the private key, it is necessary to have the integration key first, as discussed in [this session](#obtendo-a-chave-de-integração-docusign).

With the integration key generated, just click on edit. You will be redirected to an application configuration screen, just go to **Service integration** and click **ADD KEY PAIR RSA**, with which the public and private key will be shown, save both, because will be displayed only once.

### Obtaining token generation consent

With the integration key and the private key in hand, you will be able to obtain consent for the generation of the Docusign **JWT** token. When editing the integration key, add a url for redirection, for example: `https://lucaseduardo.netlify.com/`. After using the following url:

`${SERVER}/oauth/auth?response_type=code&scope=signature%20impersonation&client_id=${CLIENT_ID}&redirect_uri=${URL}`.

- **${SERVER}**: it is `https: // account.docusign.com` for production or` https: // account-d.docusign.com` for development (sandbox);

- **${CLIENT_ID}**: is the key to integration.

- **${URL}**: it must be exactly the same as it was configured when editing the integration key.

#### Final examples:

**Production**: `https://account.docusign.com/oauth/auth?response_type=code&scope=signature%20impersonation&client_id=a7879568-xxxx-xxxx-xxxx-482731558eac&redirect_uri=https://lucaseduardo.netlify.com/`.

**Development**: `https://account-d.docusign.com/oauth/auth?response_type=code&scope=signature%20impersonation&client_id=a7879568-xxxx-xxxx-xxxx-482731558eac&redirect_uri=https://lucaseduardo.netlify.com/`.

After accessing the url, you will be asked to authenticate to the docusign account and after the token generation has been authorized, you will be redirected to the configured website.

### Requesting integration review

After completing the application, it is necessary to ask for a review of the integration key, to do so just access the administrative panel, **API and keys** and click the **ACTIONS** button of the integration key, then just click **Submit review** and choose a date. Within a few minutes a response will be returned if it was approved or not.

For approval, it is necessary to have at least 20 requests with the integration key to which the review is being requested, and to have a time interval of at least 20 seconds.


[![Run in Insomnia}](https://insomnia.rest/images/run.svg)](https://insomnia.rest/run/?label=Docusign&uri=https%3A%2F%2Fraw.githubusercontent.com%2Flucas-eduardo%2Fintegrate-sdkDocusign-node%2Fmaster%2F.github%2FschemaInsomnia.json)


## How to contribute

To make a contribution to the project, just implement it in a branch and then open a PR.

The more we get better at this project, the better for the entire developer community.

## Author

[<img src="https://avatars3.githubusercontent.com/u/22918282?s=460&v=4" width=115><br><sub>@lucas-eduardo</sub>](https://github.com/lucas-eduardo)
